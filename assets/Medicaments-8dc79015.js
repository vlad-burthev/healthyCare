import{r as l,j as e,h as b,l as M}from"./index-d4c46eb0.js";import{M as u,a as q,C as E}from"./MyInput-77183f57.js";import{D as P,u as I}from"./DelateBtn-ab931404.js";import{A as C}from"./AddBtn-52c48a5f.js";import{E as N,a as S}from"./Main-b11b10bd.js";const U="_med_16rdm_1",y={med:U},g={"add-info__bg":"_add-info__bg_n384m_1","add-info__content":"_add-info__content_n384m_14","add-info__form":"_add-info__form_n384m_34","add-form__btn":"_add-form__btn_n384m_41"},$=({setUser:n,user:m,api:c,setShowForm:i})=>{const[t,d]=l.useState({name:"",number:"",manufacturer:"",description:"",photo:"",id:""}),[s,r]=l.useState(!1),p=()=>{const a={name:t.name,number:t.number,manufacturer:t.manufacturer,photo:t.photo,description:t.description,id:Date.now()};if(t.name.length===0||t.number.length===0||t.manufacturer.length===0||t.description.length===0||t.photo.length===0)return r(!0);fetch(`http://localhost:3000/${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(f=>f.json()).catch(f=>console.log(f)),n([...m,a]),i(!1)};function o(a){a.key==="e"&&a.preventDefault()}return e.jsx("div",{className:g["add-info__bg"],onClick:()=>i(!1),children:e.jsxs("div",{className:g["add-info__content"],onClick:a=>a.stopPropagation(),children:[s&&e.jsx(N,{setShowError:r}),e.jsxs("div",{className:g["add-info__form"],children:[e.jsx("div",{children:e.jsx(u,{type:"text",onChange:a=>d({...t,name:a.target.value}),placeholder:"Введіть назву *"})}),e.jsx("div",{children:e.jsx(u,{type:"num",onKeyPress:o,onChange:a=>d({...t,number:a.target.value}),placeholder:"Введіть кількість *"})}),e.jsx("div",{children:e.jsx(u,{type:"text",onChange:a=>d({...t,manufacturer:a.target.value}),placeholder:"Введіть виробника *"})}),e.jsx("div",{children:e.jsx(u,{type:"text",onChange:a=>d({...t,photo:a.target.value}),placeholder:"Введіть URL зображення *"})}),e.jsx("div",{children:e.jsx(q,{onChange:a=>d({...t,description:a.target.value}),placeholder:"Введіть опис товару *"})}),e.jsx(C,{className:g["add-form__btn"],onClick:p,children:"Додати медикамент"})]})]})})},j={"add-info__bg":"_add-info__bg_195mq_1","add-info__content":"_add-info__content_195mq_14","add-info__form":"_add-info__form_195mq_34","add-form__btn":"_add-form__btn_195mq_41"},D=({patient:n,setPatient:m,setShowForm:c,showForm:i})=>{const[t,d]=l.useState(!1),[s,r]=l.useState({});l.useEffect(()=>{r({name:n.name,number:n.number,manufacturer:n.manufacturer,photo:n.photo,description:n.description,id:n.id})},[]);const p=async()=>{r({name:s.name,number:s.number,manufacturer:s.manufacturer,photo:s.photo,description:s.description,id:n.id}),s.name.length===0||s.number.length===0||s.description.length===0||s.manufacturer.length===0?d(!0):(m(s),S.put(`http://localhost:3000/medicaments/${n.id}`,s).then(o=>{console.log(o.data)}).catch(o=>{console.error(o)}),c(!1))};return e.jsx("div",{className:j["add-info__bg"],onClick:()=>c(!1),children:e.jsxs("div",{className:j["add-info__content"],onClick:o=>o.stopPropagation(),children:[t&&e.jsx(N,{setShowError:d}),e.jsxs("div",{className:j["add-info__form"],children:[e.jsx("div",{children:e.jsx(u,{type:"text",defaultValue:n.name,onChange:o=>r({...s,name:o.target.value}),placeholder:"Введіть назву *"})}),e.jsx("div",{children:e.jsx(u,{type:"number",defaultValue:n.number,onChange:o=>r({...s,number:o.target.value}),placeholder:"Введіть кількість *"})}),e.jsx("div",{children:e.jsx(u,{type:"text",defaultValue:n.manufacturer,onChange:o=>r({...s,manufacturer:o.target.value}),placeholder:"Введіть виробника *"})}),e.jsx("div",{children:e.jsx(u,{type:"text",defaultValue:n.description,onChange:o=>r({...s,description:o.target.value}),placeholder:"Введіть введіть опис*"})}),e.jsx("div",{children:e.jsx(u,{type:"text",defaultValue:n.photo,onChange:o=>r({...s,photo:o.target.value}),placeholder:"Введіть URL зображення"})}),e.jsx("button",{className:j["add-form__btn"],onClick:()=>p(n.id),children:"Оновити інформацію"})]})]})})},A="_description_1qbri_63",h={"user-list__item":"_user-list__item_1qbri_1","user-list__content":"_user-list__content_1qbri_11","user-list__item-id":"_user-list__item-id_1qbri_18","user-list__info":"_user-list__info_1qbri_25","user-list__id":"_user-list__id_1qbri_47","user-list__photo":"_user-list__photo_1qbri_55",description:A,"user-list__btn-update":"_user-list__btn-update_1qbri_71","user-list__btn-delate":"_user-list__btn-delate_1qbri_85"},F=({userMed:n,delateUser:m})=>{const c=b(r=>r.repos.register),[i,t]=l.useState({}),[d,s]=l.useState(!1);return l.useEffect(()=>{t(n)},[]),e.jsxs("div",{className:h["user-list__item"],children:[e.jsx("div",{className:h["user-list__item-id"],children:i.id}),e.jsxs("div",{style:{display:"blcok"},className:h["user-list__content"],children:[e.jsxs("div",{className:h["user-list__info"],children:[e.jsxs("p",{children:["Назва: ",e.jsx("span",{children:i.name})," "]}),e.jsxs("p",{children:["Кільскість: ",e.jsx("span",{children:i.number})," "]}),e.jsxs("p",{children:["Виробник: ",e.jsx("span",{children:i.manufacturer})]}),e.jsxs("div",{children:["Опис:",e.jsx("span",{className:h.description,children:i.description})]})]}),e.jsx("div",{className:h["user-list__photo"],style:{border:"2px solid #4b7e52",borderRadius:"50%",width:"250px",height:"250px",backgroundPosition:"center center",backgroundSize:"cover",backgroundImage:`url(${i.photo?i.photo:""})`}})]}),c&&e.jsx(P,{className:h["user-list__btn-delate"],onClick:()=>m(i.id),children:"Видалити"}),c&&e.jsx("button",{className:h["user-list__btn-update"],onClick:()=>s(!0),children:"Оновити інформацію"}),d&&e.jsx(D,{setShowForm:s,patient:i,setPatient:t,showForm:d})]})},V={"list-item":"_list-item_1bhz3_1"},R=({users:n,delateUser:m,searchUser:c,patientLogin:i,doctorLogin:t,setMed:d})=>{const s=n.filter(r=>r.name.replace(/\s+/g,"").toLowerCase().includes(c.toLowerCase().replace(/\s+/g,""))||r.id.toString().includes(c));return e.jsx("div",{className:V["list-item"],children:s.reverse().map(r=>e.jsx(F,{setPatient:d,delateUser:m,medID:r.id,userMed:r},r.id))})},H=()=>{const n=b(_=>_.repos.patient),m=b(_=>_.repos.doctor),c=b(_=>_.repos.register),[i,t]=l.useState(""),[d,s]=l.useState([]),[r,p]=l.useState(!0),{data:o,isLoading:a,error:f}=I("http://localhost:3000/medicaments");l.useEffect(()=>{o&&(s(o),p(!1))},[o]);const L=_=>{t(_)},[k,v]=l.useState(!1),w=async _=>{S.delete(`http://localhost:3000/medicaments/${_}`).then(x=>{console.log("Медикамент видалено")}).catch(x=>{console.error("Помилка при видалені медикомента",x)}),s(d.filter(x=>x.id!==_))};return e.jsx("div",{className:y.med,children:e.jsxs(E,{children:[e.jsx(u,{value:i,onChange:_=>L(_.target.value),type:"text",maxLength:"50",placeholder:"Введіть назву або ID медикоменту"}),c&&e.jsx(C,{className:y["patients-add"],onClick:()=>v(!0),children:"Додати медикамент"}),k&&e.jsx($,{setShowForm:v,user:d,setUser:s,api:"medicaments"}),a||r?e.jsx(M,{}):e.jsx(R,{setMed:s,doctorLogin:m,searchUser:i,delateUser:w,users:d,patientLogin:n})]})})};export{H as default};
